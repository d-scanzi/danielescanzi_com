---
title: "From eegUtils to tidy data"
---
[eegUtils](https://craddm.github.io/eegUtils/articles/eegUtils.html) is an R package developed by Matt Craddock that allows you to analyse EEG data in R. Currently, I pre-process data in Matlab with [EEGLAB](https://eeglab.org/). Thus, I use `eegUtils` to load pre-processed and epoched data in R to conduct statistical analysis. Although `eegUils` is a handy package, and I love that I can easily use R to do EEG data analysis and plot scalp topographies, some aspects of this package do not align with my preferences. Specifically:

* The voltage data is stored in wide format, with one column for each electrode
* Time information is stored separately from the EEG signal information

Consequently, I find it easier to extract the data I care about (voltage, electrode names and time values) and store those in a long-format `tibble`. As I do this often, I wrote a function for this. 

*Note that some of the functions you find in the other paragraphs require the data extracted from `eegUtils` using this function. I highlighted when this is the case*

```{r}
#| eval: false

tidy_signal_from_eegUtils <- function(eegUtilsDataset) {
  
  tidy_data <- eegUtilsDataset %>% 
  # Add time column
  dplyr::mutate(time = signal[["timings"]][["time"]]) %>% 
  # Reorganise the dataset 
  dplyr::pivot_longer(cols      = !time,
               names_to  = "electrode",
               values_to = "volt") 
  
  return(tidy_data)
  }

```
